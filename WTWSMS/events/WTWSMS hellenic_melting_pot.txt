namespace = WtWSMS_ahist_pots

#################
# EVENTS FOR HELLENIC MELTING POTS
#################

province_event = {
	id = WtWSMS_ahist_pots.1
	hide_window = yes
	trigger = {
		has_game_rule = { # Has enabled new melting pot events
			name = melting_pots
			value = new
		}
		owner = {
				religion_group = pagan_group
			OR = {
				is_tribal = yes
				is_feudal = yes # Can already be Feudal at arrival
			}
		}
		OR = {
			AND = {
			owner = { # Hellenic arameans
				has_romance_culture_trigger = yes
					}	
			culture = aramean
			}
		}
		religion_group = pagan_group
		county = {
			is_feudal = yes
		}
		has_levantine_culture_trigger = yes
		NOR = {
			any_province_holding = {
				has_holding_modifier = recently_conquered
			}
		}
	}
	
	mean_time_to_happen = {
		years = 1
	}
	
	immediate = {
		set_province_flag = melting_pot_target
	}
}





province_event = {
	id = WtWSMS_ahist_pots.2
	title = WtWSMS_ahist_pots.2.name
	desc = WtWSMS_ahist_pots.2.desc
	picture = GFX_evt_stone_church # Placeholder
	border = GFX_event_normal_frame_religion
		
	trigger = {
		owner = {
			religion_group = pagan_group
			is_feudal = yes
				has_romance_culture_trigger = yes
			religion = ROOT
		}
		religion_group = pagan_group
		county = {
			is_feudal = yes
		}
		has_levantine_culture_trigger = yes
		NOR = {
			any_province_holding = {
				has_holding_modifier = recently_conquered
			}
		}
		has_province_flag = melting_pot_target
		culture = aramean
		year = 500
	}

	mean_time_to_happen = {
		months = 1200 # Testing placeholder
		modifier = {
			factor = 0.75
			owner = {
				learning = 7
			}
		}
		modifier = {
			factor = 0.75
			owner = {
				learning = 9
			}
		}
		modifier = {
			factor = 0.75
			owner = {
				learning = 11
			}
		}
		modifier = {
			factor = 0.75
			owner = {
				learning = 13
			}
		}
		modifier = {
			factor = 1.5
			owner = {
				NOT = { learning = 5 }
			}
		}
		modifier = {
			factor = 1.5
			owner = {
				NOT = { learning = 3 }
			}
		}
		modifier = {
			factor = 2.0
			owner = {
				NOT = { learning = 1 }
			}
		}
		modifier = {
			factor = 0.3
			OR = {
				has_game_rule = {
					name = culture_conversion
					value = faster_melting_pots
				}
				has_game_rule = {
					name = culture_conversion
					value = faster_melting_pots_and_slower_normal
				}
			}
		}
	}
	
	immediate = {
		set_global_flag = aramean_melting_pot
	}
	
	option = {
		name = WtWSMS_ahist_pots.2.a #
		culture = helleno_aramean
		owner = {
			culture = helleno_aramean
		}
	}
}

# Helleno-Aramean culture spreading
province_event = {
	id = WtWSMS_ahist_pots.3
	desc = WtWSMS_ahist_pots.3.desc
	picture = GFX_evt_stone_church # Placeholder
	border = GFX_event_normal_frame_religion
		
	trigger = {
		owner = {
			culture = helleno_aramean
			religion_group = pagan_group
			is_feudal = yes
			religion = ROOT
		}
		religion_group = pagan_group
		county = {
			is_feudal = yes
		}
		has_levantine_culture_trigger = yes
		NOR = {
			any_province_holding = {
				has_holding_modifier = recently_conquered
			}
		}
		has_province_flag = melting_pot_target
		culture = aramean
	}
	
	mean_time_to_happen = {
		months = 720 # Testing placeholder
		modifier = {
			factor = 0.3
			OR = {
				has_game_rule = {
					name = culture_conversion
					value = faster_melting_pots
				}
				has_game_rule = {
					name = culture_conversion
					value = faster_melting_pots_and_slower_normal
				}
			}
		}
	}

	option = {
		name = WtWSMS_ahist_pots.3.a
		culture = helleno_aramean
	}
}

# Lack of strong Aramean realm remaining means last Aramean enclaves are removed
province_event = {
	id = WtWSMS_ahist_pots.4
	title = WtWSMS_ahist_pots.4.name
	desc = WtWSMS_ahist_pots.4.desc
	picture = GFX_evt_stone_church # Placeholder
	border = GFX_event_normal_frame_diplomacy

	trigger = {
		had_global_flag = {
			flag = aramean_melting_pot
			days = 3650 # 10 years
		}
		NOT = { # Lack of strong Aramean realm remaining
			any_independent_ruler = {
				culture = aramean
				OR = {
					higher_tier_than = duke
					realm_size = 35
					any_demesne_title = {
						count = 3
						tier = DUKE
					}
				}
			}
		}
		NOT = {
			owner = {
				OR = {
					culture = aramean
					top_liege = {
						culture = aramean
					}
					liege = {
						culture = aramean
					}
				}
			}
		}
		culture = aramean
	}

	mean_time_to_happen = {
		months = 1200 # Testing placeholder
	}
	
	option = {
		name = WtWSMS_ahist_pots.4.a
		culture = helleno_aramean
	}
}